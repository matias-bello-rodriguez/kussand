---
interface Props {
  className?: string;
  dark?: boolean;
  fullscreen?: boolean;
  backgroundImage?: string;
  overlayTheme?: 'light' | 'dark' | 'none';
  paddingTop?: string;
}

const { 
  className = "", 
  dark = false, 
  fullscreen = false, 
  backgroundImage,
  overlayTheme = 'light',
  paddingTop
} = Astro.props;

// Determine colors based on overlay theme
const themeVars = overlayTheme === 'dark' 
  ? "color: white; --text-main: #ffffff; --text-muted: #d2d2d7;" 
  : "";

const overlayBg = overlayTheme === 'dark' 
  ? "rgba(15, 42, 68, 0.9)" // Deep blue/black overlay
  : "rgba(255, 255, 255, 0.9)"; // White overlay
---

<section 
  class:list={[
    "w-full px-6 section-padding flex flex-col justify-center", 
    fullscreen && "min-h-screen",
    className
  ]}
  style={
    (dark ? "background-color: var(--bg-soft);" : "background-color: var(--bg-main);") +
    (backgroundImage ? `background-image: url('${backgroundImage}'); background-size: cover; background-position: center;` : "") +
    (paddingTop ? `padding-top: ${paddingTop};` : "") +
    themeVars
  }
>
  {backgroundImage && overlayTheme !== 'none' && <div class="overlay" style={`background-color: ${overlayBg}`}></div>}
  <div class="max-w-5xl mx-auto w-full relative z-10">
    <slot />
  </div>
</section>

<style>
  section {
    position: relative;
    overflow: hidden;
    transition: color 0.3s ease;
  }
  .overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }
  .relative {
    position: relative;
  }
  .z-10 {
    z-index: 10;
  }
  .min-h-screen {
    min-height: 100vh;
  }
  .max-w-5xl {
    max-width: 64rem;
  }
  .mx-auto {
    margin-left: auto;
    margin-right: auto;
  }
  .w-full {
    width: 100%;
  }
  .px-6 {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
  .section-padding {
    padding-top: 6rem;
    padding-bottom: 6rem;
  }
  .flex {
    display: flex;
  }
  .flex-col {
    flex-direction: column;
  }
  .justify-center {
    justify-content: center;
  }
  
  @media (min-width: 768px) {
    .section-padding {
      padding-top: 8rem;
      padding-bottom: 8rem;
    }
  }
</style>
